!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"CHECK_BOX",function(){return b}),n.d(r,"DROP_DOWN",function(){return v}),n.d(r,"RADIO_BUTTONS",function(){return x}),n.d(r,"NUMERIC_TEXT_BOX",function(){return m.a}),n.d(r,"STRING_TEXT_BOX",function(){return T}),n.d(r,"TEXT_BOX",function(){});var o=n(1);function i(e){const t={};return function e(t,n,r){Object.keys(t).forEach(function(o){const i=[n,o].filter(Boolean).join("."),c=t[o];"object"!=typeof c||null===c||Array.isArray(c)?r[i]=t[o]:e(c,i,r)})}(e,null,t),t}const c=/\./;function u(e){const t={};return Object.keys(e).forEach(function(n){!function e(t,n,r){const o=t[0];if(1===t.length)return void(r[o]=n);null==r[o]&&(r[o]={});e(t.slice(1),n,r[o])}(n.split(c),e[n],t)}),t}const s=1,a=10,l=17;const f=2,d=20,p=2;const h=20,y=10;function b({width:e,y:t,label:n,value:r}){const o=NSButton.alloc().initWithFrame(NSMakeRect(0,t,e,h));return o.setButtonType(NSSwitchButton),o.setBezelStyle(0),o.setState(r?NSOnState:NSOffState),o.setTitle(n),{view:o,height:h+y,retrieveValue:function(){return"1"==o.stringValue()}}}const _=20,g=15;function v({width:e,y:t,value:n,possibleValues:r}){const o=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,t,e,_));r.forEach(function(e){o.addItemWithTitle(`${e}`)});const i=void 0!==n?r.indexOf(n):0;return o.selectItemAtIndex(i),{view:o,height:_+g,retrieveValue:function(){const e=o.indexOfSelectedItem();return r[e]}}}const S=20,O=10;function x({width:e,y:t,value:n,possibleValues:r}){const o=NSButtonCell.alloc().init();o.setButtonType(NSRadioButton);const i=r.length,c=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,t,e,S),NSRadioModeMatrix,o,1,i);c.setCellSize(CGSizeMake(Math.floor(e/i),S)),c.cells().forEach(function(e,t){e.setTitle(r[t])});const u=void 0!==n?r.indexOf(n):0;return c.selectCellAtRow_column(0,u),{view:c,height:S+O,retrieveValue:function(){const e=c.cells().indexOfObject(c.selectedCell());return r[e]}}}var m=n(4),w=n(2);const T=Object(w.a)(),N=300;function j({title:e,inputs:t}){const n=i(function(){const e={matchType:"Match layer content",regularExpression:"^Remark"};if(!e)return{};const t={},n=i(e);return Object.keys(n).forEach(function(e){const r=Object(o.sessionVariable)(e),i=Object(o.settingForKey)(e),c=void 0!==r?r:i,u=n[e];t[e]=void 0!==c?c:u}),u(t)}()),{formView:c,retrieveValues:h}=function({inputsConfig:e,settings:t}){const n=NSView.alloc().init();n.setFlipped(!0);const o={};let i=0;e.forEach(function(e){if("-"===e){const{view:e,height:t}=function({width:e,y:t}){const n=NSView.alloc().initWithFrame(NSMakeRect(0,t+a,e,s));return n.setWantsLayer(1),n.layer().setBackgroundColor(CGColorCreateGenericRGB(127/255,127/255,127/255,.5)),{view:n,height:a+s+l}}({width:N,y:i});return i+=t,void n.addSubview(e)}const{type:c,key:u,label:h,value:y,...b}=e;if(h&&"CHECK_BOX"!==c){const{view:e,height:t}=function({width:e,y:t,label:n}){const r=NSTextField.alloc().initWithFrame(NSMakeRect(0,t+f,e,d));return r.setBezeled(!1),r.setDrawsBackground(!1),r.setEditable(!1),r.setLineBreakMode(NSLineBreakByTruncatingTail),r.setSelectable(!1),r.setStringValue(n),{view:r,height:f+d+p}}({width:N,y:i,label:h});i+=t,n.addSubview(e)}const _=t[u],g=null!=y?y:_,{view:v,height:S,retrieveValue:O}=r[c]({width:N,y:i,label:h,value:g,...b});i+=S,n.addSubview(v),o[u]=O});const c=n.subviews();return c.forEach(function(e,t){t<c.length-1&&e.setNextKeyView(c[t+1])}),n.setFrame(NSMakeRect(0,0,N,i)),{formView:n,retrieveValues:o}}({inputsConfig:t.filter(Boolean),settings:n}),y=function(e){const t=NSAlert.alloc().init();return t.setMessageText(e),t.addButtonWithTitle("OK"),t.addButtonWithTitle("Cancel"),t}(e);y.setAccessoryView(c);const b=c.subviews();if(b[0]&&y.window().setInitialFirstResponder(b[0]),"1000"==y.runModal()){const e={};return Object.keys(h).forEach(function(t){const n=h[t];e[t]=n()}),u(e)}return null}var E=n(5),k=n.n(E);function B(e,t){k.a.message(t&&t.symbol?`${t.symbol} ${e}`:e)}function M(e){B(e,{symbol:"✔"})}function C(e){B(e,{symbol:"✘"})}function R(){const e={matchType:"Match layer content",regularExpression:"^Remark"};if(!e)return;const t=i(e);Object.keys(t).forEach(function(e){Object(o.setSettingForKey)(e,void 0),Object(o.setSessionVariable)(e,void 0)}),B("Reset settings")}const V=P(o.setSettingForKey);P(o.setSessionVariable);function P(e){return function(t,n){if(!t)return;const r=i(t);Object.keys(r).forEach(function(t){const n=r[t];null!=n&&e(t,n)});const o=n&&n.successMessage;o&&B(o)}}n(6),n(7);n(3);var F=n(8);function A(){const e=NSApplication.sharedApplication().orderedDocuments();return Object(F.fromNative)(e[0])}function W(){return A().selectedPage.layers}function D(){const e=[];return A().pages.forEach(function({layers:t}){t.forEach(function(t){e.push(t)})}),e}function I(){return A().selectedLayers.layers.reverse()}n.d(t,"g",function(){return j}),n.d(t,"h",function(){return R}),n.d(t,"i",function(){return V}),n.d(t,"a",function(){return"DROP_DOWN"}),n.d(t,"b",function(){return"RADIO_BUTTONS"}),n.d(t,"c",function(){return"STRING_TEXT_BOX"}),n.d(t,"e",function(){return W}),n.d(t,"d",function(){return D}),n.d(t,"f",function(){return I}),n.d(t,"k",function(){return B}),n.d(t,"l",function(){return M}),n.d(t,"j",function(){return C})},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";n.d(t,"a",function(){return i});const r=20,o=15;function i(e){return function({width:t,y:n,value:i,placeholder:c}){const u=NSTextField.alloc().initWithFrame(NSMakeRect(0,n,t,r)),s=null==i?"":`${i}`;return u.setStringValue(s),c&&u.setPlaceholderString(c),{view:u,height:r+o,retrieveValue:function(){const t=`${u.stringValue()}`;return e?e(t):t}}}}},function(e,t){e.exports=require("sketch/dom")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return createNumericTextBox});var _text_box_factory__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const createNumericTextBox=Object(_text_box_factory__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const r=async(e,t)=>{let n=0;for(const r of e)await t(await r,n++);return e};e.exports=r,e.exports.default=r},function(e,t){e.exports=require("sketch")},function(e,t,n){e.exports=n(10)},function(e,t,n){e.exports={"extract-text":n(12).default,"reset-settings":n(11).default}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=r.h},function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){return t=t||[],e.forEach(function(e){"Text"!==e.type?"Artboard"!==e.type&&"Group"!==e.type||o(e.layers,t):t.push(e)}),t}function i(){const e=Object(r.f)(),t=0!==e.length,n=Object(r.g)({title:"Extract Text",inputs:[{type:r.c,key:"regularExpression",label:"Regular Expression"},{type:r.b,key:"matchType",possibleValues:["Match layer content","Match layer name"]},{type:r.a,key:"scope",label:"Scope",possibleValues:[t&&"Selected layers","Current page","Entire document"].filter(Boolean),value:t?"Selected layers":null}]});if(!n)return;const{scope:i,...c}=n;let u=[];if("Selected layers"===i){if(Object(r.i)(c),0===(u=o(e)).length)return void Object(r.j)("No text layers in selection")}else if(Object(r.i)(n),0===(u=o("Current page"===i?Object(r.e)():Object(r.d)())).length)return void Object(r.j)(`No text layers ${"Current page"===i?"on the current page":"in the document"}`);const s=function({textLayers:e,regularExpression:t,shouldMatchLayerContent:n}){return e.filter(function(e){const r=e.text;return""!==r&&t.test(n?r:e.name)})}({textLayers:u,regularExpression:new RegExp(""===n.regularExpression?"^.+$":n.regularExpression),shouldMatchLayerContent:"Match layer content"===n.matchType}),a=s.length;0!==a?(!function(e){const t=NSPasteboard.generalPasteboard();t.clearContents(),t.setString_forType(function(e){return"\n"!==e.charAt(e.length-1)?e+"\n":e}(e),NSStringPboardType)}(s.map(function(e){return e.text}).reverse().join("\n")),Object(r.l)(`Copied ${a} match${1!==a?"es":""} to the clipboard`)):Object(r.k)("No matches")}n.d(t,"default",function(){return i})}]));