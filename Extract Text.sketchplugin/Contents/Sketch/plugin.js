!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"CHECK_BOX",function(){return h}),n.d(r,"DROP_DOWN",function(){return _}),n.d(r,"RADIO_BUTTONS",function(){return x}),n.d(r,"NUMERIC_TEXT_BOX",function(){return S.a}),n.d(r,"STRING_TEXT_BOX",function(){return m}),n.d(r,"TEXT_BOX",function(){});var o=n(1);function i({keyPrefix:e=null,shouldRemoveKeyPrefix:t=!0}={}){const n={matchType:"Match layer content",regularExpression:"^Remark"};if(!n)return{};const r={};return Object.keys(n).forEach(function(e){const t=Object(o.sessionVariable)(e),i=Object(o.settingForKey)(e),c=void 0!==t?t:i,u=n[e];r[e]=void 0!==c?c:u}),e?function({settings:e,keyPrefix:t,shouldRemoveKeyPrefix:n}){const r=t.length,o={};return Object.keys(e).forEach(function(i){-1!==i.indexOf(t)&&(o[n?i.substring(r):i]=e[i])}),o}({settings:r,keyPrefix:`${e}.`,shouldRemoveKeyPrefix:t}):r}const c=1,u=10,s=17;const a=2,l=20,f=2;const d=20,p=10;function h({width:e,y:t,label:n,value:r}){const o=NSButton.alloc().initWithFrame(NSMakeRect(0,t,e,d));return o.setButtonType(NSSwitchButton),o.setBezelStyle(0),o.setState(r?NSOnState:NSOffState),o.setTitle(n),{view:o,height:d+p,retrieveValue:function(){return"1"==o.stringValue()}}}const y=20,b=15;function _({width:e,y:t,value:n,possibleValues:r}){const o=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,t,e,y));r.forEach(function(e){o.addItemWithTitle(e)});const i=void 0!==n?r.indexOf(n):0;return o.selectItemAtIndex(i),{view:o,height:y+b,retrieveValue:function(){const e=o.indexOfSelectedItem();return r[e]}}}const g=20,v=10;function x({width:e,y:t,value:n,possibleValues:r}){const o=NSButtonCell.alloc().init();o.setButtonType(NSRadioButton);const i=r.length,c=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,t,e,g),NSRadioModeMatrix,o,1,i);c.setCellSize(CGSizeMake(Math.floor(e/i),g)),c.cells().forEach(function(e,t){e.setTitle(r[t])});const u=void 0!==n?r.indexOf(n):0;return c.selectCellAtRow_column(0,u),{view:c,height:g+v,retrieveValue:function(){const e=c.cells().indexOfObject(c.selectedCell());return r[e]}}}var S=n(4),O=n(2);const m=Object(O.a)(),T=300;function w({title:e,inputs:t}){const n=i(),{formView:o,retrieveValues:d}=function({inputsConfig:e,settings:t}){const n=NSView.alloc().init();n.setFlipped(!0);const o={};let i=0;return e.forEach(function(e){if("-"===e){const{view:e,height:t}=function({width:e,y:t}){const n=NSView.alloc().initWithFrame(NSMakeRect(0,t+u,e,c));return n.setWantsLayer(1),n.layer().setBackgroundColor(CGColorCreateGenericRGB(127/255,127/255,127/255,.5)),{view:n,height:u+c+s}}({width:T,y:i});return i+=t,void n.addSubview(e)}const{type:d,key:p,label:h,value:y,...b}=e;if(h&&"CHECK_BOX"!==d){const{view:e,height:t}=function({width:e,y:t,label:n}){const r=NSTextField.alloc().initWithFrame(NSMakeRect(0,t+a,e,l));return r.setBezeled(!1),r.setDrawsBackground(!1),r.setEditable(!1),r.setLineBreakMode(NSLineBreakByTruncatingTail),r.setSelectable(!1),r.setStringValue(n),{view:r,height:a+l+f}}({width:T,y:i,label:h});i+=t,n.addSubview(e)}const _=t[p],g=null!=y?y:_,{view:v,height:x,retrieveValue:S}=r[d]({width:T,y:i,label:h,value:g,...b});i+=x,n.addSubview(v),o[p]=S}),n.setFrame(NSMakeRect(0,0,T,i)),{formView:n,retrieveValues:o}}({inputsConfig:t,settings:n}),p=function(e){const t=NSAlert.alloc().init();return t.setMessageText(e),t.addButtonWithTitle("OK"),t.addButtonWithTitle("Cancel"),t}(e);return p.setAccessoryView(o),"1000"==p.runModal()?Object.keys(d).reduce(function(e,t){const n=d[t];return e[t]=n(),e},{}):null}var N=n(5),k=n.n(N);function j(e,t){k.a.message(t&&t.symbol?`${t.symbol} ${e}`:e)}function E(e){j(e,{symbol:"✔"})}function M(e){j(e,{symbol:"✘"})}function B(){const e={matchType:"Match layer content",regularExpression:"^Remark"};e&&(Object.keys(e).forEach(function(e){Object(o.setSettingForKey)(e,void 0),Object(o.setSessionVariable)(e,void 0)}),j("Reset settings"))}const R=C(o.setSettingForKey);C(o.setSessionVariable);function C(e){return function(t,n){if(void 0===t)return;Object.keys(t).forEach(function(n){const r=t[n];void 0!==r&&e(n,r)});const r=void 0!==n&&n.successMessage;r&&j(r)}}n(6),n(7);n(3);var P=n(8);function V(){const e=NSApplication.sharedApplication().orderedDocuments();return Object(P.fromNative)(e[0])}function F(){return V().selectedPage.layers}function W(){const e=[];return V().pages.forEach(function({layers:t}){t.forEach(function(t){e.push(t)})}),e}function A(){return V().selectedLayers.layers.reverse()}n.d(t,"g",function(){return w}),n.d(t,"h",function(){return B}),n.d(t,"i",function(){return R}),n.d(t,"a",function(){return"DROP_DOWN"}),n.d(t,"b",function(){return"RADIO_BUTTONS"}),n.d(t,"c",function(){return"STRING_TEXT_BOX"}),n.d(t,"e",function(){return F}),n.d(t,"d",function(){return W}),n.d(t,"f",function(){return A}),n.d(t,"k",function(){return j}),n.d(t,"l",function(){return E}),n.d(t,"j",function(){return M})},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";n.d(t,"a",function(){return i});const r=20,o=15;function i(e){return function({width:t,y:n,value:i,placeholder:c}){const u=NSTextField.alloc().initWithFrame(NSMakeRect(0,n,t,r)),s=null==i?"":`${i}`;return u.setStringValue(s),c&&u.setPlaceholderString(c),{view:u,height:r+o,retrieveValue:function(){const t=`${u.stringValue()}`;return e?e(t):t}}}}},function(e,t){e.exports=require("sketch/dom")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return createNumericTextBox});var _text_box_factory__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const createNumericTextBox=Object(_text_box_factory__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const r=async(e,t)=>{let n=0;for(const r of e)await t(await r,n++);return e};e.exports=r,e.exports.default=r},function(e,t){e.exports=require("sketch")},function(e,t,n){e.exports=n(10)},function(e,t,n){e.exports={"extract-text":n(12).default,"reset-settings":n(11).default}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=r.h},function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){return t=t||[],e.forEach(function(e){"Text"!==e.type?"Artboard"!==e.type&&"Group"!==e.type||o(e.layers,t):t.push(e)}),t}function i(){const e=Object(r.f)(),t=0!==e.length,n=Object(r.g)({title:"Extract Text",inputs:[{type:r.c,key:"regularExpression",label:"Regular Expression"},{type:r.b,key:"matchType",possibleValues:["Match layer content","Match layer name"]},{type:r.a,key:"scope",label:"Scope",possibleValues:[t&&"Selected layers","Current page","Entire document"].filter(Boolean),value:t?"Selected layers":null}]});if(!n)return;const{scope:i,...c}=n;let u=[];if("Selected layers"===i){if(Object(r.i)(c),0===(u=o(e)).length)return void Object(r.j)("No text layers in selection")}else if(Object(r.i)(n),0===(u=o("Current page"===i?Object(r.e)():Object(r.d)())).length)return void Object(r.j)(`No text layers ${"Current page"===i?"on the current page":"in the document"}`);const s=function({textLayers:e,regularExpression:t,shouldMatchLayerContent:n}){return e.filter(function(e){const r=e.text;return""!==r&&t.test(n?r:e.name)})}({textLayers:u,regularExpression:new RegExp(""===n.regularExpression?"^.+$":n.regularExpression),shouldMatchLayerContent:"Match layer content"===n.matchType}),a=s.length;0!==a?(!function(e){const t=NSPasteboard.generalPasteboard();t.clearContents(),t.setString_forType(function(e){return"\n"!==e.charAt(e.length-1)?e+"\n":e}(e),NSStringPboardType)}(s.map(function(e){return e.text}).reverse().join("\n")),Object(r.l)(`Copied ${a} match${1!==a?"es":""} to the clipboard`)):Object(r.k)("No matches")}n.d(t,"default",function(){return i})}]));